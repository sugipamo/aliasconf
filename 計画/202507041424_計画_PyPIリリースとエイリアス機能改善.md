# 計画書: PyPIリリースとエイリアス機能改善

**作成日**: 2025年7月4日 14:24
**計画者**: Assistant
**優先度**: 高

## 1. 目的

AliasConfプロジェクトの次期重要タスクとして、以下を実施する：
1. PyPIへの初回リリース（v0.1.1）の完了
2. エイリアス経由の環境変数設定機能の改善
3. ドキュメントの充実とユーザビリティ向上

## 2. 現状分析

### 2.1 完了済み項目
- ✅ 基本的な環境変数サポート実装（17件のテスト成功）
- ✅ ConfigManagerとの統合（14/15件のテスト成功）
- ✅ GitHub Pages公開完了
- ✅ パフォーマンステスト閾値調整完了
- ✅ v0.1.1タグ作成済み

### 2.2 課題
- PyPIリリースがPYPI_API_TOKEN設定待ち
- エイリアス経由の環境変数設定テスト1件失敗
- ドキュメントに環境変数機能の説明が不足

## 3. 実施計画

### 3.1 PyPIリリース（最優先）

**目標**: v0.1.1をPyPIに公開し、ユーザーがpip installできる状態にする

**タスク**:
1. PyPIアカウントのAPI TOKEN取得（ユーザー対応待ち）
2. GitHub SecretsにPYPI_API_TOKEN設定
3. リリースワークフローの実行
4. PyPIページの確認と動作検証
5. README.mdのインストール手順更新

**成果物**:
- PyPIで公開されたaliasconfパッケージ
- 更新されたREADME.md

### 3.2 エイリアス機能改善

**目標**: エイリアス経由の環境変数設定を完全に動作させる

**現状の問題**:
```python
# テストケース: test_load_from_env_with_aliases
config.add_alias("db.host", "database.host")
# ALIASCONF_DB_HOST="prod.db.com" として環境変数設定
# 期待: database.host == "prod.db.com"
# 実際: database.host == "localhost" (変更されていない)
```

**タスク**:
1. load_from_env()メソッドのuse_aliasesパラメータ実装確認
2. エイリアス解決ロジックの修正
3. テストケースの成功確認
4. 追加のエッジケーステスト作成

**成果物**:
- 修正されたload_from_env()メソッド
- 全15件のテスト成功

### 3.3 ドキュメント改善

**目標**: 環境変数サポートの使用方法を明確に文書化

**タスク**:
1. docs/guide/environment-variables.md作成
2. README.mdに環境変数サポートのセクション追加
3. examples/に環境変数使用例追加
4. APIドキュメントの更新

**成果物**:
- 環境変数ガイドドキュメント
- 更新されたREADME.md
- 実践的なサンプルコード

## 4. 実施スケジュール

### Phase 1: PyPIリリース（即時対応）
- API TOKEN設定待ち
- 設定完了後、即座にリリース実行

### Phase 2: エイリアス機能改善（1-2日）
- Day 1: 問題分析と修正実装
- Day 2: テスト確認とエッジケース対応

### Phase 3: ドキュメント改善（2-3日）
- Day 1: ガイドドキュメント作成
- Day 2: サンプルコード作成
- Day 3: レビューと最終調整

## 5. リスクと対策

### リスク1: PyPIリリースの遅延
- **影響**: ユーザーへの公開が遅れる
- **対策**: TestPyPIでの動作確認を継続、リリース手順の再確認

### リスク2: エイリアス機能の複雑性
- **影響**: 修正に時間がかかる可能性
- **対策**: 最小限の修正で動作確認を優先、複雑な改善は次期バージョンへ

### リスク3: ドキュメント不足による混乱
- **影響**: ユーザーが機能を正しく使用できない
- **対策**: 実践的なサンプルを多く用意、FAQセクションの追加

## 6. 成功基準

1. **PyPIリリース**
   - pip install aliasconfが成功する
   - PyPIダウンロード数の計測開始

2. **エイリアス機能**
   - 全15件のConfigManager環境変数テスト成功
   - エイリアス経由の環境変数設定が正常動作

3. **ドキュメント**
   - 環境変数機能の完全な説明
   - 実行可能なサンプルコード3つ以上

## 7. 次期展望

本計画完了後の次期タスク：
1. TOMLサポートの実装（Phase 2の主要機能）
2. CLIツールの開発
3. パフォーマンスベンチマークの公開
4. コミュニティフィードバックの収集と対応

## 8. 備考

- 環境変数サポートは基本実装が完了しており、エイリアス関連の改善は追加機能として位置づける
- PyPIリリースは技術的には準備完了、TOKEN設定のみ待機中
- ドキュメントサイトは既に公開済みのため、コンテンツ追加のみ必要