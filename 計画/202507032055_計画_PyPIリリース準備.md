# PyPIリリース準備計画

**作成日時**: 2025年7月3日 20:55  
**優先度**: 🚨 最優先  
**予定工数**: 2-3時間

## 背景

AliasConf v0.1.0の開発が完了し、GitHubリポジトリへの公開も完了しました。現在のプロジェクト状態：

- ✅ 全218件のテストが成功
- ✅ カバレッジ84.81%達成
- ✅ 型チェック・コードスタイルチェックすべてパス
- ✅ GitHub Actionsワークフローのブランチ名修正完了（master/main不一致解決済み）
- ✅ ドキュメント（mkdocs）準備済み

次のステップとして、PyPIへの公開を行い、誰でも`pip install aliasconf`でインストールできるようにします。

## 目標

1. PyPIへの初回リリース（v0.1.0）の実施
2. 自動リリースパイプラインの確立
3. インストール・使用方法のドキュメント更新

## 実施計画

### Phase 1: PyPIアカウント準備（30分）

1. **PyPIアカウント作成**
   - [ ] PyPI本番環境アカウント作成
   - [ ] TestPyPIアカウント作成（テスト用）
   - [ ] 2要素認証の設定

2. **APIトークン生成**
   - [ ] PyPI APIトークンの生成
   - [ ] TestPyPI APIトークンの生成
   - [ ] スコープ設定（プロジェクト固有）

### Phase 2: プロジェクト設定更新（45分）

1. **pyproject.toml確認・更新**
   ```toml
   # 現在の設定を確認し、以下を追加・修正
   [project]
   name = "aliasconf"
   version = "0.1.0"
   description = "Powerful configuration management with aliasing support"
   readme = "README.md"
   requires-python = ">=3.8"
   license = {text = "MIT"}
   authors = [
       {name = "Your Name", email = "your.email@example.com"}
   ]
   keywords = ["configuration", "config", "alias", "yaml", "json"]
   classifiers = [
       "Development Status :: 4 - Beta",
       "Intended Audience :: Developers",
       "License :: OSI Approved :: MIT License",
       "Programming Language :: Python :: 3",
       "Programming Language :: Python :: 3.8",
       "Programming Language :: Python :: 3.9",
       "Programming Language :: Python :: 3.10",
       "Programming Language :: Python :: 3.11",
       "Programming Language :: Python :: 3.12",
   ]
   
   [project.urls]
   Homepage = "https://github.com/sugipamo/aliasconf"
   Documentation = "https://github.com/sugipamo/aliasconf#readme"
   Repository = "https://github.com/sugipamo/aliasconf"
   Issues = "https://github.com/sugipamo/aliasconf/issues"
   ```

2. **ビルド設定確認**
   - [ ] `[build-system]`セクションの確認
   - [ ] 必要な依存関係の確認
   - [ ] パッケージに含めるファイルの確認

### Phase 3: GitHub Secrets設定（30分）

1. **シークレット登録**
   - [ ] `PYPI_API_TOKEN`をGitHub Secretsに登録
   - [ ] `TEST_PYPI_API_TOKEN`をGitHub Secretsに登録

2. **リリースワークフロー調整**
   ```yaml
   # .github/workflows/release.yml の更新
   - 現在のタグベースリリースフローを確認
   - TestPyPIへのテストリリース追加
   - 本番PyPIへのリリース設定
   ```

### Phase 4: テストリリース実施（45分）

1. **ローカルビルドテスト**
   ```bash
   # ビルドツールのインストール
   pip install build twine
   
   # パッケージビルド
   python -m build
   
   # ビルド結果確認
   ls -la dist/
   ```

2. **TestPyPIへのアップロード**
   ```bash
   # TestPyPIへアップロード
   twine upload --repository testpypi dist/*
   
   # インストールテスト
   pip install -i https://test.pypi.org/simple/ aliasconf
   ```

3. **動作確認**
   - [ ] インストール成功確認
   - [ ] 基本的な使用例の実行
   - [ ] 依存関係の解決確認

### Phase 5: 本番リリース（30分）

1. **リリースタグ作成**
   ```bash
   git tag -a v0.1.0 -m "Initial release of AliasConf"
   git push origin v0.1.0
   ```

2. **GitHub Releasesの作成**
   - [ ] リリースノート作成
   - [ ] CHANGELOGからの内容転記
   - [ ] 主要機能のハイライト

3. **自動リリース実行確認**
   - [ ] GitHub Actionsの実行監視
   - [ ] PyPIへのアップロード確認
   - [ ] インストール可能性確認

### Phase 6: ドキュメント更新（30分）

1. **README.md更新**
   - [ ] インストール方法追加
   - [ ] PyPIバッジ追加
   - [ ] バージョンバッジ追加

2. **ドキュメントサイト更新**
   - [ ] インストールガイド作成
   - [ ] クイックスタート更新

## 成功基準

1. `pip install aliasconf`でインストール可能
2. GitHub Actionsによる自動リリースが動作
3. ドキュメントにインストール方法が明記

## リスクと対策

| リスク | 影響 | 対策 |
|--------|------|------|
| パッケージ名の重複 | リリース不可 | 事前にPyPIで名前確認 |
| 依存関係の問題 | インストール失敗 | TestPyPIでの十分なテスト |
| 自動リリースの失敗 | 手動対応必要 | ローカルでの手動リリース準備 |

## 関連ファイル

- pyproject.toml
- .github/workflows/release.yml
- README.md
- CHANGELOG.md

## 次のステップ

1. ドキュメントサイトの公開（GitHub Pages）
2. コントリビューションガイドラインの作成
3. Issue/PRテンプレートの整備

---

**ステータス**: 計画策定完了  
**実施予定**: 即時着手可能